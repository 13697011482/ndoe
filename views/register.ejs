<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <%- include('template/file') %>
  <link rel="stylesheet" href="/stylesheets/lagou.css">
</head>
<body>
  <form id="register" action="users/register" method="POST" class="border border-primary p-3">
    <div class="form-group">
      <label for="username">用户名</label>
      <input type="text" class="form-control" id="username" 
      name="username"
      autocomplete="off" placeholder="请输入用户名">
    </div>
    <div class="form-group">
      <label for="password">密码</label>
      <input type="password" class="form-control" id="password" name="password" autocomplete="off"  placeholder="请输入密码">
    </div>
    <div class="form-group">
      <label for="rePassword">确认密码</label>
      <input type="password" class="form-control" id="rePassword" autocomplete="off"  placeholder="请再次输入密码">
    </div>
    <div class="form-group">
      <label for="check_code">验证码</label>
      <input type="text" class="form-control" id="check_code"
      name="checkCode" autocomplete="off"  placeholder="请输入验证码">
      <img id="check_img" src="/users/checkCode" alt="">
    </div>
    <button type="submit" class="btn btn-primary">注册</button>
    <a href="/login" class="float-right mt-2">立即登录</a>
  </form>

  <div class="toast" role="alert" data-delay="3000" style="position: absolute; left: 50%; transform: translateX(-50%);">
    <div class="toast-header">
      <strong class="mr-auto">提示信息</strong>
      <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="toast-body">
      Hello, world! This is a toast message.
    </div>
  </div>
  <script>
    var $username = $('#username')
    var $password = $('#password')
    var $rePassword = $('#rePassword')
    var $toast = $('.toast')
    $('#register').submit(function(){
      if( !$username.val() || !$password.val() ){
        // alert("输入框不能为空！");
        $toast.toast('show')
        $('.toast-body').html('输入框不能为空！')
        return false;
      }
      else if($password.val() !== $rePassword.val()){
        // alert("两次密码不相同，请重新输入！");
        $toast.toast('show')
        $('.toast-body').html('两次密码不相同，请重新输入！')
        return false;
      }
    })
    $("#check_img").click(function(){
      console.log(1);
      $(this).attr('src' , '/users/checkCode?' + Math.random())
    })
  </script>
</body>
</html>